(function angularBootstrapTour(a){a.factory("TourHelpers",["$templateCache","$compile",function(b,e){var h={};function g(k,j){var i=k.$$phase;if(i==="$apply"||i==="$digest"){if(j&&(typeof(j)==="function")){j()}}else{k.$apply(j)}}function f(j,i){return function(){var k=angular.element(j);g(i,function(){e(k)(i)});return k}}function d(k,j){var i=b.get(k);if(i){return f(i,j)}return null}function c(i){if(i==="true"){return true}else{if(i==="false"){return false}}return i}h.attachTemplate=function(l,j,i){var k;if(j.template){k=f(l.$eval(j.template),l)}if(j.templateUrl){k=d(j.templateUrl,l)}if(k){i.template=k}};h.attachEventHandlers=function(l,j,i,k){angular.forEach(k,function(m){if(j[m]){i[m]=function(n){g(l,function(){l.$eval(j[m])})}}})};h.attachInterpolatedValues=function(j,i,k){angular.forEach(k,function(l){if(j[l]){i[l]=c(j[l]);j.$observe(l,function(m){i[l]=c(m)})}})};return h}]);a.controller("TourController",["$filter",function(e){var c=this,b=[],f;function d(h){var g=e("orderBy")(h,"order");angular.forEach(g,function(j,i){j.next=g[i+1]?i+1:-1;j.prev=i-1});return g}c.refreshTour=function(){if(f){f._options.steps=[];f.addSteps(d(b))}};c.addStep=function(g){if(~b.indexOf(g)){return}b.push(g);c.refreshTour()};c.removeStep=function(g){if(!~b.indexOf(g)){return}b.splice(b.indexOf(g),1);c.refreshTour()};c.getSteps=function(){return b};c.init=function(g){g.steps=d(b);f=new Tour(g);return f}}]);a.directive("tour",["TourHelpers",function(b){return{restrict:"EA",scope:true,controller:"TourController",link:function(g,f,d,h){var i={},e="onStart onEnd afterGetState afterSetState afterRemoveState onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),c="name container keyboard storage debug redirect duration basePath backdrop orphan".split(" ");b.attachInterpolatedValues(d,i,c);b.attachEventHandlers(g,d,i,e);b.attachTemplate(g,d,i);g.$watchCollection(h.getSteps,function(j){g.stepCount=j.length});if(d.tourOptions){angular.extend(i,g.$eval(d.tourOptions))}g.tour=h.init(i)}}}]);a.directive("tourStep",["TourHelpers",function(b){return{restrict:"EA",scope:true,require:"^tour",link:function(h,g,e,j){var i={element:g},f="onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),d="content title path animation container placement backdrop redirect orphan reflex".split(" ");b.attachInterpolatedValues(e,i,d);e.$observe("order",function(k){i.order=!isNaN(k*1)?k*1:0;j.refreshTour()});b.attachEventHandlers(h,e,i,f);b.attachTemplate(h,e,i);function c(){var k;if(e.skip){k=h.$eval(e.skip)}if(!k){k=g.is(":hidden")}return k}h.$watch(c,function(k){if(k){j.removeStep(i)}else{j.addStep(i)}});if(e.options){angular.extend(i,h.$eval(e.options))}j.addStep(i)}}}])}(angular.module("bm.bsTour",[])));