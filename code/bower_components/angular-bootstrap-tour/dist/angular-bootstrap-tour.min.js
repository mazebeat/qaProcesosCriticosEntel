!function(a){"use strict";a.factory("TourHelpers",["$templateCache","$compile",function(a,b){function c(a,b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)}function d(a,d){return function(){var e=angular.element(a);return c(d,function(){b(e)(d)}),e}}function e(b,c){var e=a.get(b);return e?d(e,c):null}function f(a){return"true"===a?!0:"false"===a?!1:a}var g={};return g.attachTemplate=function(a,b,c){var f;b.template&&(f=d(a.$eval(b.template),a)),b.templateUrl&&(f=e(b.templateUrl,a)),f&&(c.template=f)},g.attachEventHandlers=function(a,b,d,e){angular.forEach(e,function(e){b[e]&&(d[e]=function(){c(a,function(){a.$eval(b[e])})})})},g.attachInterpolatedValues=function(a,b,c){angular.forEach(c,function(c){a[c]&&(b[c]=f(a[c]),a.$observe(c,function(a){b[c]=f(a)}))})},g}]),a.controller("TourController",["$filter",function(a){function b(b){var c=a("orderBy")(b,"order");return angular.forEach(c,function(a,b){a.next=c[b+1]?b+1:-1,a.prev=b-1}),c}var c,d=this,e=[];d.refreshTour=function(){c&&(c._options.steps=[],c.addSteps(b(e)))},d.addStep=function(a){~e.indexOf(a)||(e.push(a),d.refreshTour())},d.removeStep=function(a){~e.indexOf(a)&&(e.splice(e.indexOf(a),1),d.refreshTour())},d.getSteps=function(){return e},d.init=function(a){return a.steps=b(e),c=new Tour(a)}}]),a.directive("tour",["TourHelpers",function(a){return{restrict:"EA",scope:!0,controller:"TourController",link:function(b,c,d,e){var f={},g="onStart onEnd afterGetState afterSetState afterRemoveState onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),h="name container keyboard storage debug redirect duration basePath backdrop orphan".split(" ");a.attachInterpolatedValues(d,f,h),a.attachEventHandlers(b,d,f,g),a.attachTemplate(b,d,f),b.$watchCollection(e.getSteps,function(a){b.stepCount=a.length}),d.tourOptions&&angular.extend(f,b.$eval(d.tourOptions)),b.tour=e.init(f)}}}]),a.directive("tourStep",["TourHelpers",function(a){return{restrict:"EA",scope:!0,require:"^tour",link:function(b,c,d,e){function f(){var a;return d.skip&&(a=b.$eval(d.skip)),a||(a=c.is(":hidden")),a}var g={element:c},h="onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" "),i="content title path animation container placement backdrop redirect orphan reflex".split(" ");a.attachInterpolatedValues(d,g,i),d.$observe("order",function(a){g.order=isNaN(1*a)?0:1*a,e.refreshTour()}),a.attachEventHandlers(b,d,g,h),a.attachTemplate(b,d,g),b.$watch(f,function(a){a?e.removeStep(g):e.addStep(g)}),d.options&&angular.extend(g,b.$eval(d.options)),e.addStep(g)}}}])}(angular.module("bm.bsTour",[]));